{% extends 'main.html.twig' %}

{% block htmlhead %}
<link rel="stylesheet" href="{{ asset('leaflet/leaflet.css') }}" />
<script src="{{ asset('leaflet/leaflet.js') }}"></script>

<script>
{{ include('mfzch/scripts/generics.js.twig') }}
</script>
{% endblock %}

{% block main %}
<script>
if (typeof jQuery != 'undefined') {
	// enable block-level ajax disable
	$.mobile.ignoreContentEnabled = true;
}
</script>
<div data-role="page" id="main-page">
	<div data-role="header" data-position="fixed" data-tap-toggle="false">
		<h1>Commander's Network</h1>
		<a href="#nav-panel" class="ui-btn-left ui-btn ui-corner-all ui-btn-icon-notext ui-icon-bars">Navigation</a>
	</div>

	<div role="main" class="ui-content" data-ajax="false">

		{% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
			<h1>Commander's Network</h1>
			<p>Logged in as {{ app.user.getUsername()|e }} | <a href="{{ path('fos_user_security_logout') }}" rel="external">Logout</a></p>

			<ul data-role="listview" data-inset="true" class="nav-listview">
				<li data-role="list-divider">Commanders</li>
				<li><a href="{{ path('view-profile') }}">View Profile</a></li>
				<li><a href="{{ path('view-public-profile') }}">View Public Profile</a></li>
				<li><a href="{{ path('edit-profile') }}">Edit Profile</a></li>
				<li><a href="{{ path('player-finder') }}">Locate Commanders</a></li>
			</ul>

		{% else %}
			<p>The commander's network requires users to log in.</p>
			<p>Registration is free and open to all.</p>

			<p><a href="{{ path('fos_user_security_login') }}" rel="external">Log in</a> or <a href="{{ path('fos_user_registration_register') }}" rel="external">Register</a></p>
		{% endif %}
	</div>
</div>
{% endblock %}